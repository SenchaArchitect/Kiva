{
    "id": "ExtBox1-ext-gen9316",
    "type": "panel",
    "reference": {
        "name": "items",
        "type": "array"
    },
    "codeClass": null,
    "userConfig": {
        "bottom": 0,
        "cls": null,
        "right": 0,
        "top": 0,
        "ui": "detail",
        "width": 400,
        "hideOnMaskTap": true,
        "layout": "vbox",
        "modal": true,
        "designer|userClassName": "Detail",
        "designer|userAlias": "detail"
    },
    "customConfigs": [
        {
            "group": "(Custom Properties)",
            "name": "loan",
            "type": "object"
        }
    ],
    "designerId": "502e7c24-8ce7-4387-8bd0-7c7b3aeeeedc",
    "$viewOrder": 3,
    "cn": [
        {
            "id": "ExtBox1-ext-gen10184",
            "type": "carousel",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|userClassName": "MyCarousel",
                "layout|flex": 1
            },
            "customConfigs": [],
            "cn": [
                {
                    "id": "ExtBox1-ext-gen10460",
                    "type": "linkedinstance",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {},
                    "customConfigs": [],
                    "iconCls": "icon-linkedinstance",
                    "masterInstanceId": "ExtBox1-ext-gen3674"
                },
                {
                    "id": "ExtBox1-ext-gen11107",
                    "type": "linkedinstance",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {},
                    "customConfigs": [],
                    "iconCls": "icon-linkedinstance",
                    "masterInstanceId": "ExtBox1-ext-gen8104"
                },
                {
                    "id": "ExtBox1-ext-gen11767",
                    "type": "linkedinstance",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {},
                    "customConfigs": [],
                    "iconCls": "icon-linkedinstance",
                    "masterInstanceId": "ExtBox1-ext-gen5512"
                }
            ]
        },
        {
            "id": "ExtBox1-ext-gen12876",
            "type": "button",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "text": "Lend $25",
                "designer|userClassName": "MyButton"
            },
            "customConfigs": []
        },
        {
            "id": "ExtBox1-ext-gen13209",
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "hide",
                "designer|params": [
                    "animation"
                ],
                "implHandler": [
                    "",
                    "var me = this;",
                    "",
                    "//we fire this event so the controller can deselect all items immediately.",
                    "me.fireEvent('hideanimationstart', me);",
                    "",
                    "//show the mask again",
                    "me.callParent();",
                    ""
                ],
                "designer|userClassName": "hide"
            },
            "customConfigs": []
        },
        {
            "id": "ExtBox1-ext-gen13725",
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "updateLoan",
                "designer|params": [
                    "newLoan"
                ],
                "implHandler": [
                    "var carousel = this.down('carousel'),",
                    "    information = this.down('detailInformation'),",
                    "    payments = this.down('detailSchedule'),",
                    "    map = this.down('detailMap'),",
                    "    coords = newLoan.get('location').geo.pairs.split(' ').map(parseFloat);",
                    "",
                    "information.setData(newLoan.data);",
                    "payments.setData(newLoan.data.terms.scheduled_payments);",
                    "",
                    "//update the lend button",
                    "this.updateLendButton();",
                    "",
                    "//update the map",
                    "if (this.mapMarker) {",
                    "    this.mapMarker.setMap(null);",
                    "    delete this.mapMarker;",
                    "}",
                    "",
                    "//add a marker for the Loanee's position on the map",
                    "this.mapMarker = new google.maps.Marker({",
                    "    map: map.map,",
                    "    title : newLoan.get('name'),",
                    "    position: new google.maps.LatLng(coords[0], coords[1])",
                    "});",
                    "",
                    "carousel.setActiveItem(0);",
                    "",
                    "map.setMapCenter(this.mapMarker.position);"
                ],
                "designer|userClassName": "updateLoan"
            },
            "customConfigs": []
        },
        {
            "id": "ExtBox1-ext-gen14339",
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "updateLendButton",
                "implHandler": [
                    "var url    = \"http://www.kiva.org/lend/\" + this.getLoan().getId(),",
                    "    button = this.down('button'),",
                    "    link = Ext.getDom('linker'),",
                    "    clickEvent = document.createEvent('Event');",
                    "",
                    "//http://www.sencha.com/forum/showthread.php?130358-window.open()-from-toolbar-button-opens-window-from-list-item-a-new-tab&p=639938#post639938",
                    "clickEvent.initEvent('click', true, false);",
                    "",
                    "button.setHandler(function() {",
                    "    link.href = url;",
                    "    link.dispatchEvent(clickEvent);",
                    "});"
                ],
                "designer|userClassName": "updateLendButton"
            },
            "customConfigs": []
        },
        {
            "id": "ExtBox1-ext-gen3453",
            "type": "object",
            "reference": {
                "name": "loan",
                "type": "object"
            },
            "codeClass": null,
            "userConfig": {
                "implHandler": [
                    "null"
                ],
                "designer|displayName": "loan",
                "designer|userClassName": "loan"
            },
            "customConfigs": []
        },
        {
            "id": "ExtBox1-ext-gen9439",
            "type": "basiceventbinding",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "onPanelInitialize",
                "implHandler": [
                    "this.setBaseCls(Ext.baseCSSPrefix + 'sheet');"
                ],
                "name": "initialize",
                "designer|userClassName": "onPanelInitialize"
            },
            "customConfigs": []
        }
    ]
}
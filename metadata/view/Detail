{
    "type": "panel",
    "reference": {
        "name": "items",
        "type": "array"
    },
    "codeClass": null,
    "userConfig": {
        "loan": [
            "{}"
        ],
        "designer|userClassName": "Detail",
        "designer|userAlias": "detail",
        "bottom": 0,
        "right": 0,
        "top": 0,
        "ui": "detail",
        "width": 400,
        "hideOnMaskTap": true,
        "layout": "vbox",
        "modal": true
    },
    "configAlternates": {
        "loan": "object"
    },
    "id": "ExtBox1-ext-gen9316",
    "designerId": "502e7c24-8ce7-4387-8bd0-7c7b3aeeeedc",
    "customConfigs": [
        {
            "group": "(Custom Properties)",
            "name": "loan",
            "type": "string"
        }
    ],
    "cn": [
        {
            "type": "basiceventbinding",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|userClassName": "onPanelInitialize",
                "fn": "onPanelInitialize",
                "implHandler": [
                    "this.setBaseCls(Ext.baseCSSPrefix + 'sheet');"
                ],
                "name": "initialize"
            },
            "designerId": "276aca71-4647-4603-a4a1-27c8077f90ce"
        },
        {
            "type": "carousel",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "layout|flex": 1,
                "designer|userClassName": "MyCarousel"
            },
            "designerId": "85e59ef6-6562-43e0-b41a-bf8844d7191b",
            "cn": [
                {
                    "type": "linkedinstance",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "designerId": "7454f94d-49f7-4068-a42a-fbd0287f90e2",
                    "masterInstanceId": "ExtBox1-ext-gen3674"
                },
                {
                    "type": "linkedinstance",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "designerId": "7c2895ae-7360-4da7-aa05-1ea0a1efc8a8",
                    "masterInstanceId": "ExtBox1-ext-gen8104"
                },
                {
                    "type": "linkedinstance",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "designerId": "ca008aff-24e4-4114-abb1-c2ab76661879",
                    "masterInstanceId": "ExtBox1-ext-gen5512"
                }
            ]
        },
        {
            "type": "button",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|userClassName": "MyButton",
                "id": "lendButton",
                "text": "Lend $25"
            },
            "designerId": "0d83ac5c-272a-496b-8ab0-fd49cb937cbd"
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|userClassName": "hide",
                "fn": "hide",
                "designer|params": [
                    "animation"
                ],
                "implHandler": [
                    "",
                    "var me = this;",
                    "",
                    "//we fire this event so the controller can deselect all items immediately.",
                    "me.fireEvent('hideanimationstart', me);",
                    "",
                    "//show the mask again",
                    "me.callParent();",
                    ""
                ]
            },
            "designerId": "56b6e33e-54ae-4733-87b4-56dc1ab657ae"
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|userClassName": "updateLoan",
                "fn": "updateLoan",
                "designer|params": [
                    "newLoan"
                ],
                "implHandler": [
                    "var carousel = this.down('carousel'),",
                    "    information = this.down('detailInformation'),",
                    "    payments = this.down('detailSchedule'),",
                    "    map = this.down('detailMap'),",
                    "    coords = newLoan.get('location').geo.pairs.split(' ').map(parseFloat);",
                    "",
                    "information.setData(newLoan.data);",
                    "payments.setData(newLoan.data.terms.scheduled_payments);",
                    "",
                    "//update the lend button",
                    "this.updateLendButton();",
                    "",
                    "//update the map",
                    "if (this.mapMarker) {",
                    "    this.mapMarker.setMap(null);",
                    "    delete this.mapMarker;",
                    "}",
                    "",
                    "//add a marker for the Loanee's position on the map",
                    "this.mapMarker = new google.maps.Marker({",
                    "    map: map.map,",
                    "    title : newLoan.get('name'),",
                    "    position: new google.maps.LatLng(coords[0], coords[1])",
                    "});",
                    "",
                    "carousel.setActiveItem(0);",
                    "",
                    "map.setMapCenter(this.mapMarker.position);"
                ]
            },
            "designerId": "c5837780-1848-4212-b49b-016e5de7cb8d"
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|userClassName": "updateLendButton",
                "fn": "updateLendButton",
                "implHandler": [
                    "",
                    "var url    = \"http://www.kiva.org/lend/\" + this.getLoan().getId(),",
                    "    button = this.down('button');",
                    "button.on('tap', function(){",
                    "    window.open(url);",
                    "});",
                    "",
                    "/*",
                    "    ",
                    "    link = Ext.getDom('linker'),",
                    "    clickEvent = document.createEvent('Event');",
                    "",
                    "",
                    "http://www.sencha.com/forum/showthread.php?130358-window.open()-from-toolbar-button-opens-window-from-list-item-a-new-tab&p=639938#post639938",
                    "",
                    "clickEvent.initEvent('click', true, false);",
                    "",
                    "button.setHandler(function() {",
                    "    link.href = url;",
                    "    link.dispatchEvent(clickEvent);",
                    "});*/"
                ]
            },
            "designerId": "25d3a9da-80f5-4169-89b3-b6ca0f63b8eb"
        }
    ]
}